<section style="padding: 5rem 0; background-color: white; font-family: sans-serif;" id="blog-block">
  <div style="max-width: 1200px; margin: auto; padding: 0 1rem;">
    <div style="text-align: center; margin-bottom: 4rem;">
      <h2 style="font-size: 2.5rem; font-weight: bold; color: #111;">Blog & Penelitian Terbaru</h2>
      <p style="font-size: 1.125rem; color: #555; max-width: 700px; margin: 0 auto;">
        Ikuti perkembangan terbaru dari penelitian dan aktivitas komunitas
      </p>
    </div>

    <div id="blog-posts" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;"></div>

    <div style="text-align: center; margin-top: 3rem;">
      <a href="/blog">
        <button style="padding: 0.75rem 2rem; border: 2px solid #16a34a; color: #16a34a; background: white; border-radius: 0.5rem;">
          Lihat Semua Artikel
        </button>
      </a>
    </div>
  </div>
</section>

<script>
async function loadBlogPosts() {
  const container = document.getElementById("blog-posts");
  container.innerHTML = "Loading...";

  try {
    const res = await fetch("/api/posts");
    const posts = await res.json();
    const featured = posts.slice(0, 3);

    container.innerHTML = featured.map(post => `
      <div style="box-shadow: 0 2px 8px rgba(0,0,0,0.06); border-radius: 0.5rem; overflow: hidden;">
        ${post.featuredImage ? `<img src="${post.featuredImage}" alt="${post.title}" style="width: 100%; height: 200px; object-fit: cover;">` : ""}
        <div style="padding: 1.5rem;">
          <div style="font-size: 0.875rem; color: #15803d; margin-bottom: 0.5rem;">${post.category} â€¢ ${post.readTime} min</div>
          <h3 style="font-size: 1.25rem; font-weight: bold; color: #111;">${post.title}</h3>
          <p style="color: #555; margin: 0.5rem 0 1rem;">${post.excerpt}</p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.875rem; color: #888;">${new Date(post.createdAt).toLocaleDateString()}</span>
            <a href="/post/${post.id}" style="color: #16a34a; font-size: 0.875rem;">Baca Selengkapnya â†’</a>
          </div>
        </div>
      </div>
    `).join("");

  } catch (err) {
    container.innerHTML = "<p>Gagal memuat artikel ðŸ˜¢</p>";
  }
}

document.addEventListener("DOMContentLoaded", loadBlogPosts);
</script>
